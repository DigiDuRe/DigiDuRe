# Data model CLERUS

The CLERUS datamodel is developed by analysing DRC and DM systematically. The schematic overview of the datamodel that has been created can be accessed [here](https://viewer.diagrams.net/?tags=%7B%7D&lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=CLERUS_datamodel_schema.drawio#Uhttps%3A%2F%2Fraw.githubusercontent.com%2FMorrizzzzz%2FDigiDuRe%2Fmain%2F1_Data_Harmonization%2FCLERUS_datamodel_schema.drawio). This database schema on the right shows the various fields that are generated from DRC and that are present in DM. In addition these tables show to which field its content is parsed in CLERUS. On the left the database schema shows the CLERUS database model of which the various tables and fields are described below.

At the core of CLEURS the table **01_clerus_bio** is put with the basic biographical information about an individual. It for instance contains the name, surname, year of birth, year of death etc. for every individual. The information from  **01_clerus_bio** is rather generic and is not bound to ministers only. Making a distinction between generic data and more contextual data is a deliberate decision in the design of the datamodel, allowing it to be intergrated with other sources later on.

Given the manual curation that has taken place when integrating DRC and DM we decided to not keep track on based on which datasource decisions have been made. Yet we do know that every decision we made for every individual that is in DRC is double checked with DM and that individuals that are not in DRC come from DM. For DRC we kept the id and reused that id as clerus_id. For individuals that are not in DRC, but that are in DM we created a new clerus_id which are all above 9_000_000. Since DM is based on roles where every role is a different row in the table [see](1_2_DM_1572-2004.ipynb), we decided to add "role_source_id" to 12_clerus_role in order to keep the relation to the original source.

## 01_clerus_bio

A SQL code, including the data type and a short description of every column in every table, to create **01_clerus_bio** is provided below.

```sql
CREATE TABLE "01_clerus_bio" (
  "clerus_id" INTEGER,                              --Unique identifyer and primary key in the database
  "first_name" VARCHAR(255),                        --First name
  "infix" VARCHAR(255),                             --infix of name
  "surname" VARCHAR(255),                           --surname
  "initials" VARCHAR(255),                          --initials
  "sex" VARCHAR(255),                               --sex
  "info_family" VARCHAR(255),                       --information about familiy relations. For instance son of (Z.V. Zoon Van or brother of etc.)
  "birth_place" VARCHAR(255),                       --place of birth
  "birth_place_id" INTEGER,                         --this field contains an autogenerated primary key to allow adding alternative spellings for the placename which is stored in 21_birth_alt_place
  "birth_year" INTEGER,                             --year of birth
  "birth_date_exact" VARCHAR(255),                  --exact date of birth ddmmyyyy
  "birth_year_accuracy" VARCHAR(255),               --comments about the accuracy of the birth date e.g. circa , ca. etc.
  "baptism_place" VARCHAR(255),                     --place of baptism
  "baptism_place_id" INTEGER,                       --this field contains an autogenerated primary key to allow adding alternative spellings for the placename which is stored in 22_baptism_alt_place
  "baptism_year" INTEGER,                           --year in which the baptism took place
  "baptism_date_exact" VARCHAR(255),                --exact date of the baptism
  "baptism_date_accuracy" VARCHAR(255),             --comments about the accuracy of the baptism date e.g. circa , ca. etc.
  "death_place" VARCHAR(255),                       --place of death
  "death_place_id" INTEGER,                         --this field contains an autogenerated primary key to allow adding alternative spellings for the placename which is stored in 23_death_alt_place
  "death_year" INTEGER,                             --year of death
  "death_date_exact" VARCHAR(255),                  --exact date of death
  "death_date_accuracy" VARCHAR(255),               --comments about the accuracy of the death date e.g. circa , ca. etc.
  "burried_place" VARCHAR(255),                     --place where someone is burried
  "burried_place_id" INTEGER,                       --this field contains an autogenerated primary key to allow adding alternative spellings for the placename which is stored in 24_burried_alt_place
  "funeral_year" INTEGER,                           --year of funeral
  "funeral_date_exact" VARCHAR(255),                --exact date of funeral as string
  "funeral_data_accuracy" VARCHAR(255),             --comments about the accuracy of the funeral date e.g. circa , ca. etc.
  "remarks" VARCHAR(255),                           --remarks about the individual
  "remarks_source" VARCHAR(255),                    --information about from which dataset the data originates and  additional remarks about the source (e.g volume/ book)
);
```
## 02_drc_org

As a one-to-one relationship with **01_clerus_bio** the table **02_drc_org** is put in place. This table contains the original input form the [DRC text file](1_1_DRC_1555-1816.ipynb). The reason to not integrate this into **01_clerus_bio** is because the database design strategy is to make a distinction between generic and more contextual data. Furthermore, the final version of CLERUS will not contain this information for every individual, since it will also contain information from for instance [DM](1_2_DM_1572-2004.ipynb).

```sql
DROP TABLE IF EXISTS "02_drc_org";

CREATE TABLE "02_drc_org" (
  "drc_id" INTEGER,                                 --Key that corresponds with the clerus_id in 01_clerus_bio. Since DRC is used as basis for CLERUS we decided to use the same value for CLERUS as used in DRC. Therefore the drc_id can be directly connected with the clerus_id.
  "original_input_drc" TEXT                         --The original input text string from DRC
);
```

## 11_clerus_alt_name
Since individuals can have multiple alternative names, the table **11_clerus_alt_name** is considered a one to many relationship with **01_clerus_bio**.

```sql
DROP TABLE IF EXISTS "11_clerus_alt_name";

CREATE TABLE "11_clerus_alt_name" (
  "clerus_id" INTEGER,                              --foreign key to 01_clerus_bio
  "alt_name" TEXT,                                  --alternative name in case it is not specified
  "alt_first_name" VARCHAR(255),                    --alternative first name
  "alt_infix" VARCHAR(255),                         --alternative infix
  "alt_surname" VARCHAR(255),                       --alternative surname
  "alt_info_family" VARCHAR(255),                   --alternative information about the family
  "remarks_alt_name" TEXT,                          --remarks about the alternative name
  "alt_initials" VARCHAR(255)                       --alternative initials
);
```

## 12_clerus_role
The table **12_clerus_role** contains information about the various roles an individual could have had over time. Since an individual could have had multiple roles over time, **12_clerus_rols** has a one to many relationship with **01_clerus_bio**. The table also allows to add overlapping roles.

```sql
DROP TABLE IF EXISTS "12_clerus_role";

CREATE TABLE "12_clerus_role" (
  "clerus_id" INTEGER,                              --foreign key to 01_clerus_bio
  "role_type" VARCHAR(255),                         --the type of role
  "role_place" TEXT,                                --the placename of the role
  "role_place_id" INTEGER,                          --this field contains an autogenerated primary key to allow adding alternative spellings for the placename which is stored in 25_role_alt_place
  "role_classis_code" INTEGER,                      --the classis code of the role
  "role_classis" VARCHAR(255),                      --the classis of the role
  "role_parish" VARCHAR(255),                       --the parish name of the role
  "role_province" VARCHAR(255),                     --the name of the province of the role
  "role_region" VARCHAR(255),                       --the name of the region of the rol
  "role_start_year" INTEGER,                        --start year of the role
  "role_start_date_exact" VARCHAR(255),             --exact starting date of the role
  "role_start_year_accuracy" VARCHAR(255),          --comments about the accuracy of starting data of the role e.g. circa , ca. etc.
  "role_end_year" INTEGER,                          --end year of the role
  "role_end_date_exact" VARCHAR(255),               --exact end date of the role
  "role_end_year_accuracy" VARCHAR(255),            --comments about the accuracy of starting data of the role e.g. circa , ca. etc.
  "role_residence_place" VARCHAR(255),              --place of residence for the role
  "role_residence_place_id" INTEGER,                --this field contains an autogenerated primary key to allow adding alternative spellings for the placename which is stored in 26_residence_alt_place
  "role_remarks" TEXT,                              --remarks about the role
  "role_remarks_source" VARCHAR(255),               --information about from which dataset the data originates and  additional remarks about the source (e.g volume/ book)
  "role_source_id" INTEGER                          --in order to relate the information about the role to the original dataset, a field to store this information is created (e.g. DM id)
);
```
## 2x_xxx_alt_place
Within the dataset there are multiple field that contain information about place names. To allow for multiple alternative spellings of placenames a series of tables are generated which are linked as one to many relationships with the various tables presented above.

```sql
DROP TABLE IF EXISTS "21_birth_alt_place";
DROP TABLE IF EXISTS "22_baptism_alt_place";
DROP TABLE IF EXISTS "23_death_alt_place";
DROP TABLE IF EXISTS "24_burried_alt_place";
DROP TABLE IF EXISTS "25_role_alt_place";
DROP TABLE IF EXISTS "26_residence_alt_place";

CREATE TABLE "21_birth_alt_place" (
  "birth_place_id" INTEGER DEFAULT 0,             --foreign key for birth place
  "alt_place_name" VARCHAR(255)                   --alternative spelling for place name
);

CREATE TABLE "22_baptism_alt_place" (
  "baptized_place_id" INTEGER DEFAULT 0,          --foreign key for baptism place
  "alt_place_name" VARCHAR(255)                   --alternative spelling for place name
);

CREATE TABLE "23_death_alt_place" (
  "death_place_id" INTEGER DEFAULT 0,             --foreign key for death place
  "alt_place_name" VARCHAR(255)                   --alternative spelling for place name
);

CREATE TABLE "24_burried_alt_place" (
  "burried_place_id" INTEGER DEFAULT 0,           --foreign key for burried place
  "alt_place_name" VARCHAR(255)                   --alternative spelling for place name
);

CREATE TABLE "25_role_alt_place" (
  "role_place_id" INTEGER DEFAULT 0,              --foreign key for role place
  "alt_place_name" VARCHAR(255)                   --alternative spelling for place name
);

CREATE TABLE "26_residence_alt_place" (
  "role_place_residence_id" INTEGER DEFAULT 0,    --foreign key for residence place
  "alt_place_name" VARCHAR(255)                   --alternative spelling for place name
);
```


The various SQL create tables can also be accessed as a .sql file here: [create_clerus.sql](create_clerus.sql)


# Data model CLERUS+

As stated above CLERUS+ would be based on all individuals that did an exam that gave the the rigth to act as protestant minister. Therefore, it adds a new table where this information can be parsed to. The database diagram for CLERUS+ can be accessed [here](https://viewer.diagrams.net/?tags=%7B%7D&lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=CLERUS_datamodel_schema_extended.drawio#Uhttps%3A%2F%2Fraw.githubusercontent.com%2FMorrizzzzz%2FDigiDuRe%2Fmain%2F1_Data_Harmonization%2FCLERUS_datamodel_schema_extended.drawio). On the right it contains additional datasources from where this data can be derived from, on the left it contains the CLERUS+ database model / diagram.

## 03_clerus_exam
For CLERUS+ an additional table is included to add information about the preperation exam, proponenten exam and where and under which administrative body these took place.

The table **03_clerus_exam** contains information about the exam of an individual and is considered to have a one-to-one (one row for every inidividual where information about the exam date is known) relationship with **01_clerus_bio**, since the exam for getting the "proponent"-status, which allows to act as minister needs to be done only once. In the version 1 of CLERUS this table remained empty

```sql
DROP TABLE IF EXISTS "03_clerus_exam";

CREATE TABLE "03_clerus_exam" (
  "clerus_id" VARCHAR(255),                         --Unique identifyer and primary key in the database
  "prep_exam_classis" VARCHAR(255),                 --The classis (administrative entity) where the preperation exam took place
  "prep_exam_date_exact" VARCHAR(255),              --exact date of preperation exam ddmmyyyy
  "prep_exam_year" VARCHAR(255),                    --the year the preperation exam took place
  "prop_exam_classis" VARCHAR(255),                 --The classis (administrative entity) where the proponent exam took place
  "prop_exam_date_exact" VARCHAR(255),              --the exact date of the exam to obtain the proponent status
  "prop_exam_date_year" INTEGER DEFAULT 0,          --year of the exam to obtain the proponent status
  "commendati_classis" VARCHAR(255),                --The classis (administrative entity) where the someone got the commendati status
  "commendati_classis_date_exact" INTEGER DEFAULT 0,--The exact date when someone got the commendati status
  "commendati_classis_year" INTEGER DEFAULT 0       --The year when someone got the commendati status
  "remarks_source" VARCHAR(255),                    --information about from which dataset the data originates
  "source_id" INTEGER,                              --in order to relate the information about the role to the original dataset, a field to store this information is created (e.g. keppel or boekzaallijst)
);
```


The various SQL create tables for CLERUS+ can also be accessed as a .sql file here: [create_clerus_plus.sql](create_clerus_plus.sql)